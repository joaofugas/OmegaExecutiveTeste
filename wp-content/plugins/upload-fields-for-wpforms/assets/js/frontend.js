(()=>{"use strict";function i(i){var e=function(i){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={text:{"application/vnd.oasis.opendocument.text":"Text","text/plain":"Text"},file:{"text/html":"HTML","text/php":"PHP","x-httpd-php":"PHP","text/css":"CSS","text/js":"JavaScript","application/javascript":"JavaScript","application/json":"JSON","application/xml":"XML","application/x-shockwave-flash":"SWF","video/x-flv":"FLV","application/vnd.google-apps.file":"File"},image:{"application/vnd.google-apps.photo":"Photo","image/png":"PNG","image/jpeg":"JPEG","image/jpg":"JPG","image/gif":"GIF","image/bmp":"BMP","image/vnd.microsoft.icon":"ICO","image/tiff":"TIFF","image/tif":"TIF","image/svg+xml":"SVG"},zip:{"application/zip":"ZIP","application/x-rar-compressed":"RAR","application/x-msdownload":"EXE","application/vnd.ms-cab-compressed":"CAB"},audio:{"audio/mpeg":"MP3","video/quicktime":"QT","application/vnd.google-apps.audio":"Audio","audio/x-m4a":"Audio"},video:{"application/vnd.google-apps.video":"Video","video/x-flv":"Video","video/mp4":"Video","video/webm":"Video","video/ogg":"Video","application/x-mpegURL":"Video","video/MP2T":"Video","video/3gpp":"Video","video/quicktime":"Video","video/x-msvideo":"Video","video/x-ms-wmv":"Video"},pdf:{"application/pdf":"PDF"},word:{"application/msword":"MS Word"},doc:{"application/vnd.google-apps.document":"Google Docs"},excel:{"application/vnd.ms-excel":"Excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel"},presentation:{"application/vnd.google-apps.presentation":"Slide","application/vnd.oasis.opendocument.presentation":"Presentation"},powerpoint:{"application/vnd.ms-powerpoint":"Powerpoint"},form:{"application/vnd.google-apps.form":"Form"},folder:{"application/vnd.google-apps.folder":"Folder"},drawing:{"application/vnd.google-apps.drawing":"Drawing"},script:{"application/vnd.google-apps.script":"Script"},sites:{"application/vnd.google-apps.sites":"Sites"},spreadsheet:{"application/vnd.google-apps.spreadsheet":"Spreadsheet","application/vnd.oasis.opendocument.spreadsheet":"Spreadsheet"}},a="File",o="file";return Object.keys(n).map((function(s){e&&n[s][i]?o=s:n[s][i]&&(a=n[s][i])})),e?o:a}(i,!0);return e=e||"file","".concat(upwpforms.pluginUrl,"/assets/images/icons/").concat(e,".png")}$=jQuery;var e={init:function(){$(".upwpforms-uploader.google-drive-upload").each((function(){e.initUploader($(this))}))},initUploader:function(e){var n=e.next(".upload-file-list"),a=e.parents("form"),o=e.find(".file-list"),s=a.find('button[type="submit"]'),t=e.data("form-id"),l=e.data("field-id"),d=e.data("folder-id"),p=e.data("max-size"),r=e.data("max-post-size");(!p||p>r)&&(p=r);var c=e.data("min-size"),f=e.data("max-files"),m=e.data("extensions");m=m?m.replace(/\s/g,"").replace(/,+$/,""):"*";var u=[],g=function(i,e){if(e){var n=i.files,a=n.findIndex((function(i){return i.id===e.id}))+1;a<n.length&&v(i,n[a])}},v=function(i,e){i.stop();var n=o.find("#".concat(e.id));n.addClass("active"),wp.ajax.send("upwpforms_get_google_drive_upload_url",{data:{name:e.name,size:e.size,type:e.type,folder_id:d,form_id:t,field_id:l},success:function(e){i.setOption("url",e),i.start()},error:function(a){console.log(a),a.responseJSON&&a.responseJSON.data&&n.addClass("error").find(".file-info-error").text(a.responseJSON.data),g(i,e)}})},h='\n            <div class="file-list-item" id="">\n                    <img class="file-icon" width="32" height="32" src=""/>\n\n                    <div class="file-info">\n                        <div class="upload-item">\n                            <span class="upload-item-name"></span>\n                            <span class="upload-item-size"></span>\n                        </div>\n\n                        <div class="file-info-percentage">\n                            <i class="dashicons dashicons-saved"></i>\n                            <img class="spinner-icon" src="'.concat(upwpforms.pluginUrl,'/assets/images/spinner.gif"/>\n                            <span class="percentage">0%</span>\n                            <i class="dashicons dashicons-controls-pause"></i>\n                            <i class="dashicons dashicons-controls-play"></i>\n                            <i class="remove-file dashicons dashicons-no-alt"></i>\n                        </div>\n\n                        <span class="file-info-error"></span>\n                        <div class="file-info-progress">\n                            <span class="file-info-progress-bar"></span>\n                        </div>\n                    </div>\n                </div>\n            '),_=e.find(".upwpforms-uploader-browse"),x=e.find(".upwpforms-uploader-body"),w=new plupload.Uploader({browse_button:_[0],drop_element:x[0],multipart:!1,multi_selection:f>1,filters:{max_files:f,max_file_size:p,min_file_size:c,mime_types:[{title:wp.i18n.__("Allowed files","upwpforms"),extensions:m}]},init:{postInit:function(i){o.on("click",".remove-file",(function(){var e=$(this).closest(".file-list-item"),n=e.attr("id");i.files.find((function(i){return i.id===n}))&&i.removeFile(i.getFile(n)),e.remove(),i.files.length<f&&x.removeClass("hidden")}))},FilesAdded:function(e,n){n.forEach((function(e){var n=$(h);n.attr("id",e.id),n.find(".upload-item-name").text(e.name),n.find(".upload-item-size").text(plupload.formatSize(e.size)),n.find(".file-icon").attr("src",i(e.type)),o.append(n)})),s.prop("disabled",!0),v(e,n[0]),e.files.length>=f&&x.addClass("hidden")},FileUploaded:function(i,e,n){s.prop("disabled",!1);var a=o.find("#".concat(e.id));a.addClass("uploaded"),a.find(".percentage").text(wp.i18n.__("Completed","upwpforms"));var t=JSON.parse(n.response),l={id:t.id,name:e.name,size:e.size,iconLink:t.iconLink,webViewLink:t.webViewLink};u.push(l),g(i,e)},UploadProgress:function(i,e){var n=o.find("#".concat(e.id));n.find(".file-info-progress-bar").css("width",e.percent+"%"),n.find(".percentage").text(e.percent+"%")},UploadComplete:function(i,e){s.prop("disabled",!1),u.length&&n.val(JSON.stringify(u)).trigger("change")},Error:function(e,n){console.log(n);var a=n.code,s=n.file,t=n.message,l=n.type,d=t;-600===a?(d=wp.i18n.__("File size exceeds the maximum upload size.","integrate-google-drive")+"(".concat(p,")"),"min"===l&&(d=wp.i18n.__("File size is less than the minimum upload size.","integrate-google-drive")+"(".concat(c,"mb)"))):-601===a?d=wp.i18n.__("This file type is not allowed","integrate-google-drive"):"COUNT_ERROR"===a&&(d=wp.i18n.__("This file was not uploaded. You can`t upload more than","integrate-google-drive")+" ".concat(f," ").concat(wp.i18n.__("files","integrate-google-drive")));var r=$("#".concat(s.id));r.length?(r.find(".file-info-error").text(d),r.addClass("error")):setTimeout((function(){var e=$(h);e.attr("id",s.id),e.addClass("error"),e.find(".upload-item-name").text(s.name),e.find(".upload-item-size").text(plupload.formatSize(s.size)),e.find(".file-icon").attr("src",i(s.type)),e.find(".file-info-error").text(d),o.append(e)}),100)}}});w.buildUrl=function(i,e){return i},plupload.addFileFilter("min_file_size",(function(i,e,n){(i=1024*i*1024)&&e.size<i?(this.trigger("Error",{code:plupload.FILE_SIZE_ERROR,file:e,type:"min"}),n(!1)):n(!0)})),plupload.addFileFilter("max_files",(function(i,e,n){i&&this.files.length>=i?(this.trigger("Error",{code:"COUNT_ERROR",file:e}),n(!1)):n(!0)})),w.init()}};const n=e;$=jQuery;var a={init:function(){$(".upwpforms-uploader.upwpforms-file-upload").each((function(){a.initUploader($(this))}))},initUploader:function(e){var n=e.next(".upload-file-list"),a=e.parents("form"),o=e.find(".file-list"),s=a.find('button[type="submit"]'),t=e.data("max-size"),l=e.data("max-post-size");(!t||t>l)&&(t=l);var d=e.data("field-id"),p=e.data("form-id"),r=e.data("min-size"),c=e.data("max-files"),f=e.data("extensions");f=f?f.replace(/\s/g,"").replace(/,+$/,""):"*";var m=e.data("media-library"),u=[],g='\n            <div class="file-list-item" id="">\n                    <img class="file-icon" width="32" height="32" src=""/>\n\n                    <div class="file-info">\n                        <div class="upload-item">\n                            <span class="upload-item-name"></span>\n                            <span class="upload-item-size"></span>\n                        </div>\n\n                        <div class="file-info-percentage">\n                            <i class="dashicons dashicons-saved"></i>\n                            <img class="spinner-icon" src="'.concat(upwpforms.pluginUrl,'/assets/images/spinner.gif"/>\n                            <span class="percentage">0%</span>\n                            <i class="dashicons dashicons-controls-pause"></i>\n                            <i class="dashicons dashicons-controls-play"></i>\n                            <i class="remove-file dashicons dashicons-no-alt"></i>\n                        </div>\n\n                        <span class="file-info-error"></span>\n                        <div class="file-info-progress">\n                            <span class="file-info-progress-bar"></span>\n                        </div>\n                    </div>\n                </div>\n            '),v=e.find(".upwpforms-uploader-browse"),h=e.find(".upwpforms-uploader-body"),_=new plupload.Uploader({browse_button:v[0],drop_element:h[0],url:upwpforms.ajaxUrl,multi_selection:c>1,multipart_params:{action:"upwpforms_upload_file",nonce:upwpforms.nonce,media_library:m,field_id:d,form_id:p},filters:{max_files:c,max_file_size:t,min_file_size:r,mime_types:[{title:wp.i18n.__("Allowed files","upwpforms"),extensions:f}]},init:{postInit:function(i){o.on("click",".remove-file",(function(){var e=$(this).closest(".file-list-item"),n=e.attr("id"),a=i.files;a.find((function(i){return i.id===n}))&&i.removeFile(i.getFile(n)),e.remove(),a.length<c&&h.removeClass("hidden")}))},FilesAdded:function(e,n){n.forEach((function(e){var n=$(g);n.attr("id",e.id),n.find(".upload-item-name").text(e.name),n.find(".upload-item-size").text(plupload.formatSize(e.size)),n.find(".file-icon").attr("src",i(e.type)),o.append(n)})),e.files.length>=c&&h.addClass("hidden"),e.start()},FileUploaded:function(i,e,n){var a=o.find("#".concat(e.id));a.addClass("uploaded"),a.find(".percentage").text(wp.i18n.__("Completed","upwpforms"));var t=JSON.parse(n.response);console.log(t),u.push(t.data),s.prop("disabled",!1)},UploadProgress:function(i,e){s.prop("disabled",!0);var n=o.find("#".concat(e.id));n.addClass("active"),n.find(".file-info-progress-bar").css("width",e.percent+"%"),n.find(".percentage").text(e.percent+"%")},UploadComplete:function(i,e){s.prop("disabled",!1),u.length&&n.val(JSON.stringify(u)).trigger("change")},Error:function(e,n){console.log(n);var a=n.code,s=n.file,l=n.message,d=n.type,p=n.response,f=l;-600===a?(f=wp.i18n.__("File size exceeds the maximum upload size.","integrate-google-drive")+"(".concat(t,")"),"min"===d&&(f=wp.i18n.__("File size is less than the minimum upload size.","integrate-google-drive")+"(".concat(r,"mb)"))):-601===a?f=wp.i18n.__("This file type is not allowed","integrate-google-drive"):"COUNT_ERROR"===a?f=wp.i18n.__("This file was not uploaded. You can`t upload more than","integrate-google-drive")+" ".concat(c," ").concat(wp.i18n.__("files","integrate-google-drive")):-200===a&&(f=JSON.parse(p).data);var m=$("#".concat(s.id));m.length?(m.find(".file-info-error").text(f),m.addClass("error")):setTimeout((function(){var e=$(g);e.attr("id",s.id),e.addClass("error"),e.find(".upload-item-name").text(s.name),e.find(".upload-item-size").text(plupload.formatSize(s.size)),e.find(".file-icon").attr("src",i(s.type)),e.find(".file-info-error").text(f),o.append(e)}),100)}}});plupload.addFileFilter("max_files",(function(i,e,n){i&&this.files.length>=i?(this.trigger("Error",{code:"COUNT_ERROR",file:e}),n(!1)):n(!0)})),_.init()}};const o=a;$=jQuery;var s={init:function(){$(".upwpforms-uploader.image-upload").each((function(){s.initUploader($(this))}))},initUploader:function(e){var n=e.next(".upload-file-list"),a=e.parents("form"),o=e.find(".file-list"),s=a.find('button[type="submit"]'),t=e.data("max-size"),l=e.data("max-post-size");(!t||t>l)&&(t=l);var d=e.data("field-id"),p=e.data("form-id"),r=e.data("min-size"),c=e.data("max-files"),f=e.data("extensions");f=f?f.replace(/\s/g,"").replace(/,+$/,""):"jpg,jpeg,png,gif";var m=e.data("media-library"),u=[],g='\n            <div class="file-list-item" id="">\n                    <img class="file-icon" width="32" height="32" src=""/>\n\n                    <div class="file-info">\n                        <div class="upload-item">\n                            <span class="upload-item-name"></span>\n                            <span class="upload-item-size"></span>\n                        </div>\n\n                        <div class="file-info-percentage">\n                            <i class="dashicons dashicons-saved"></i>\n                            <img class="spinner-icon" src="'.concat(upwpforms.pluginUrl,'/assets/images/spinner.gif"/>\n                            <span class="percentage">0%</span>\n                            <i class="dashicons dashicons-controls-pause"></i>\n                            <i class="dashicons dashicons-controls-play"></i>\n                            <i class="remove-file dashicons dashicons-no-alt"></i>\n                        </div>\n\n                        <span class="file-info-error"></span>\n                        <div class="file-info-progress">\n                            <span class="file-info-progress-bar"></span>\n                        </div>\n                    </div>\n                </div>\n            '),v=e.find(".upwpforms-uploader-browse"),h=e.find(".upwpforms-uploader-body"),_=new plupload.Uploader({browse_button:v[0],drop_element:h[0],url:upwpforms.ajaxUrl,multi_selection:c>1,filters:{max_files:c,max_file_size:t,min_file_size:r,mime_types:[{title:wp.i18n.__("Image files","upload-fields-for-wpforms"),extensions:f}]},multipart_params:{action:"upwpforms_upload_file",nonce:upwpforms.nonce,media_library:m,field_id:d,form_id:p},init:{postInit:function(i){o.on("click",".remove-file",(function(){var e=$(this).closest(".file-list-item"),n=e.attr("id"),a=i.files;a.find((function(i){return i.id===n}))&&i.removeFile(i.getFile(n)),e.remove(),a.length<c&&h.removeClass("hidden")}))},FilesAdded:function(e,n){n.forEach((function(e){var n=$(g);n.attr("id",e.id),n.find(".upload-item-name").text(e.name),n.find(".upload-item-size").text(plupload.formatSize(e.size));var a=new mOxie.Image;a.onload=function(){n.find(".file-icon").attr("src",a.getAsDataURL()),a.destroy(),a=null},a.onerror=function(){n.find(".file-icon").attr("src",i(e.type))},a.load(e.getSource()),o.append(n)})),e.files.length>=c&&h.addClass("hidden"),e.start()},FileUploaded:function(i,e,n){var a=o.find("#".concat(e.id));a.removeClass("active").addClass("uploaded"),a.find(".percentage").text(wp.i18n.__("Completed","upwpforms"));var t=JSON.parse(n.response);u.push(t.data),s.prop("disabled",!1)},UploadProgress:function(i,e){s.prop("disabled",!0);var n=o.find("#".concat(e.id));n.addClass("active"),n.find(".file-info-progress-bar").css("width",e.percent+"%"),n.find(".percentage").text(e.percent+"%")},UploadComplete:function(i,e){s.prop("disabled",!1),u.length&&n.val(JSON.stringify(u)).trigger("change")},Error:function(e,n){console.log(n);var a=n.code,s=n.file,l=n.message,d=n.type,p=n.response,f=l;-600===a?(f=wp.i18n.__("File size exceeds the maximum upload size.","integrate-google-drive")+"(".concat(t,")"),"min"===d&&(f=wp.i18n.__("File size is less than the minimum upload size.","integrate-google-drive")+"(".concat(r,"mb)"))):-601===a?f=wp.i18n.__("This file type is not allowed","integrate-google-drive"):"COUNT_ERROR"===a?f=wp.i18n.__("You can`t upload more than","integrate-google-drive")+" ".concat(c," ").concat(wp.i18n.__("files","integrate-google-drive")):-200===a&&(f=JSON.parse(p).data);var m=$("#".concat(s.id));m.length?(m.find(".file-info-error").text(f),m.addClass("error")):setTimeout((function(){var e=$(g);e.attr("id",s.id),e.removeClass("active uploaded").addClass("error"),e.find(".upload-item-name").text(s.name),e.find(".upload-item-size").text(plupload.formatSize(s.size)),e.find(".file-icon").attr("src",i(s.type)),e.find(".file-info-error").text(f),o.append(e)}),100)}}});plupload.addFileFilter("max_files",(function(i,e,n){i&&this.files.length>=i?(this.trigger("Error",{code:"COUNT_ERROR",file:e}),n(!1)):n(!0)})),_.init()}};const t=s;var l;l=function(){n.init(),o.init(),t.init()},jQuery(document).ready(l)})();